<!DOCTYPE html>
<html>
  <head>
    <title>Home</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <link href="resources/css/jquery-ui-themes.css" type="text/css" rel="stylesheet"/>
    <link href="resources/css/axure_rp_page.css" type="text/css" rel="stylesheet"/>
    <link href="data/styles.css" type="text/css" rel="stylesheet"/>
    <link href="files/home/styles.css" type="text/css" rel="stylesheet"/>
    <script src="resources/scripts/jquery-1.7.1.min.js"></script>
    <script src="resources/scripts/jquery-ui-1.8.10.custom.min.js"></script>
    <script src="resources/scripts/axure/axQuery.js"></script>
    <script src="resources/scripts/axure/globals.js"></script>
    <script src="resources/scripts/axutils.js"></script>
    <script src="resources/scripts/axure/annotation.js"></script>
    <script src="resources/scripts/axure/axQuery.std.js"></script>
    <script src="resources/scripts/axure/doc.js"></script>
    <script src="data/document.js"></script>
    <script src="resources/scripts/messagecenter.js"></script>
    <script src="resources/scripts/axure/events.js"></script>
    <script src="resources/scripts/axure/action.js"></script>
    <script src="resources/scripts/axure/expr.js"></script>
    <script src="resources/scripts/axure/geometry.js"></script>
    <script src="resources/scripts/axure/flyout.js"></script>
    <script src="resources/scripts/axure/ie.js"></script>
    <script src="resources/scripts/axure/model.js"></script>
    <script src="resources/scripts/axure/repeater.js"></script>
    <script src="resources/scripts/axure/sto.js"></script>
    <script src="resources/scripts/axure/utils.temp.js"></script>
    <script src="resources/scripts/axure/variables.js"></script>
    <script src="resources/scripts/axure/drag.js"></script>
    <script src="resources/scripts/axure/move.js"></script>
    <script src="resources/scripts/axure/visibility.js"></script>
    <script src="resources/scripts/axure/style.js"></script>
    <script src="resources/scripts/axure/adaptive.js"></script>
    <script src="resources/scripts/axure/tree.js"></script>
    <script src="resources/scripts/axure/init.temp.js"></script>
    <script src="files/home/data.js"></script>
    <script src="resources/scripts/axure/legacy.js"></script>
    <script src="resources/scripts/axure/viewer.js"></script>
    <script type="text/javascript">
      $axure.utils.getTransparentGifPath = function() { return 'resources/images/transparent.gif'; };
      $axure.utils.getOtherPath = function() { return 'resources/Other.html'; };
      $axure.utils.getReloadPath = function() { return 'resources/reload.html'; };
    </script>
  </head>
  <body>
    <div id="base" class="">

      <!-- Multi State Tester 1 (Dynamic Panel) -->
      <div id="u0" class="ax_dynamic_panel" data-label="Multi State Tester 1">
        <div id="u0_state0" class="panel_state" data-label="State1">
          <div id="u0_state0_content" class="panel_state_content">

            <!-- State One Child (Shape) -->
            <div id="u1" class="ax_shape" data-label="State One Child">
              <img id="u1_img" class="img " src="images/home/state_one_child_u1.png"/>
              <!-- Unnamed () -->
              <div id="u2" class="text">
                <p><span>Panel 1: State 1</span></p>
              </div>
            </div>

            <!-- State One Child (Shape) [footnote] -->
            <div id="u1_ann" class="annotation"></div>
          </div>
        </div>
        <div id="u0_state1" class="panel_state" data-label="State2">
          <div id="u0_state1_content" class="panel_state_content">

            <!-- State Two Child (Shape) -->
            <div id="u3" class="ax_shape" data-label="State Two Child">
              <img id="u3_img" class="img " src="images/home/state_one_child_u1.png"/>
              <!-- Unnamed () -->
              <div id="u4" class="text">
                <p><span>Panel 1: State 2</span></p>
              </div>
            </div>
          </div>
        </div>
        <div id="u0_state2" class="panel_state" data-label="State3">
          <div id="u0_state2_content" class="panel_state_content">

            <!-- State Three Child (Shape) -->
            <div id="u5" class="ax_shape" data-label="State Three Child">
              <img id="u5_img" class="img " src="images/home/state_one_child_u1.png"/>
              <!-- Unnamed () -->
              <div id="u6" class="text">
                <p><span>Panel 1: State 3</span></p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Multi State Tester 1 (Dynamic Panel) [footnote] -->
      <div id="u0_ann" class="annotation"></div>

      <!-- Single State Tester (Dynamic Panel) -->
      <div id="u7" class="ax_dynamic_panel" data-label="Single State Tester">
        <div id="u7_state0" class="panel_state" data-label="State1">
          <div id="u7_state0_content" class="panel_state_content">

            <!-- Unnamed (Shape) -->
            <div id="u8" class="ax_shape">
              <img id="u8_img" class="img " src="images/home/state_one_child_u1.png"/>
              <!-- Unnamed () -->
              <div id="u9" class="text">
                <p><span>Single State</span></p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Multi State Tester 2 (Dynamic Panel) -->
      <div id="u10" class="ax_dynamic_panel" data-label="Multi State Tester 2">
        <div id="u10_state0" class="panel_state" data-label="State1">
          <div id="u10_state0_content" class="panel_state_content">

            <!-- State One Child (Shape) -->
            <div id="u11" class="ax_shape" data-label="State One Child">
              <img id="u11_img" class="img " src="images/home/state_one_child_u1.png"/>
              <!-- Unnamed () -->
              <div id="u12" class="text">
                <p><span>Panel 2: State 1</span></p>
              </div>
            </div>

            <!-- State One Child (Shape) [footnote] -->
            <div id="u11_ann" class="annotation"></div>
          </div>
        </div>
        <div id="u10_state1" class="panel_state" data-label="State2">
          <div id="u10_state1_content" class="panel_state_content">

            <!-- State Two Child (Shape) -->
            <div id="u13" class="ax_shape" data-label="State Two Child">
              <img id="u13_img" class="img " src="images/home/state_one_child_u1.png"/>
              <!-- Unnamed () -->
              <div id="u14" class="text">
                <p><span>Panel 2: State 2</span></p>
              </div>
            </div>
          </div>
        </div>
        <div id="u10_state2" class="panel_state" data-label="State3">
          <div id="u10_state2_content" class="panel_state_content">

            <!-- State Three Child (Shape) -->
            <div id="u15" class="ax_shape" data-label="State Three Child">
              <img id="u15_img" class="img " src="images/home/state_one_child_u1.png"/>
              <!-- Unnamed () -->
              <div id="u16" class="text">
                <p><span>Panel 2: State 3</span></p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Multi State Tester 2 (Dynamic Panel) [footnote] -->
      <div id="u10_ann" class="annotation"></div>
    </div>
    <!-- PLUGIN BEGIN-->
    <style>
      .exploder__toggles,.exploder__modal{
        width:100%;
        height:100%;
        display:block;
        position:absolute;
        margin:0;
        top:0;
        left:0;
      }
      .exploder__toggles{
        z-index: 1000;
        pointer-events:none;
      }
      .exploder__toggle{
        position: absolute;
        top:0;
        left: 0;
        border:0;
        padding:0.25em 0.5em;
        pointer-events: auto;
        cursor: pointer;
        color: red;
        opacity: 0.5;
        background-color: transparent;
        outline: 0;
        transition: opacity 0.25s;
        font-size: 1em;
      }
      .exploder__toggle:hover{
        opacity: 1;
      }
      .exploder__modal{
        z-index: 1100;
        background-color: rgba(0,0,0,0.7);
        position:fixed;
        overflow:scroll;
      }
      .modal__close{
        position:absolute;
        top:0;
        right:0;
        width:1em;
        height:1em;
        padding:0.5em;
        margin:0;
        color: white;
        text-align:center;
        cursor: pointer;
        font-size:1.5em;
      }
      .modal__title,.modal__stateName{
        font-family: Helvetica, Arial, sans;
        color: white;
        text-align: center;
      }
      .modal__stateName{
        margin: 20px auto 5px;
      }
      .exploder__modal .ax_dynamic_panel{
        z-index: 1001;
        height: auto !important;
        top: auto !important;
        margin: 0 auto 0;
        position: relative !important;
        outline: 0;
      }

      .exploder__modal .panel_state{
        margin: 0 auto 0;
        display:block !important;
        visibility: visible !important;
        position:relative !important;
      }
      .exploder__modal .annotation{
        display:none !important;
      }
      .exploder--hidden{
        display:none;
        visability: none;
      }
    </style>

    <div class="exploder__toggles">
        <!--<input type="button" value="+" class="exploder__toggle" id="exploder__toggle--sample"></input>-->
    </div>
    <div class="exploder__modal exploder--hidden">
      <h1 class="modal__title">Modal Title</h1>
      <div class="modal__close">&times;</div>
    </div>
    <script type="text/javascript">
      $(document).ready(function() {
        body = $('body');
        panel = $('.ax_dynamic_panel');
        toggles = $('.exploder__toggles');
        exploderToggle = $('.exploder__toggle');


        //Modal Elements
        modal = $('.exploder__modal');
        closeButton = $('.modal__close');
        panelName = $('.modal__title');

        //1: Build the annotations
        //  1.1: Create Annotation Template
        //  1.2: For each panel, place template
        panel.each(function(){ //Loop over panels
         if ( $(this).children('.panel_state').length > 1) { //If panel has more than one state

          //    1.2.2: String manipulate to set ID
          panelID = $(this).attr('id'); //Get
          toggleID = panelID + '--toggle';

          //    1.2.1: Duplicate template
          toggles.append('<input type="button" value="+" class="exploder__toggle" id="' + toggleID + '"></input>');

          //    1.2.3: Measure panel placement
          //      1.2.3.1: Get panel x + y
          panelPosition = $(this).position();

          toggleTarget = $('#'+ toggleID);
          toggleX = panelPosition.left;
          toggleY = panelPosition.top;
          //    1.2.4: Apply values to template instance
          toggleTarget.css({ top: toggleY + "px", left: toggleX + "px"});
        }
        });

        //2: Show and hide functions
        //  2.1: Initialization
        viewerTest = $('.ax_dynamic_panel').css("width");

        //If height = 0 then it's coming through the viewer
        if(viewerTest == '0' || viewerTest == '0px'){
          toggles.addClass('exploder--hidden');
        }

        //  2.2: Listen to changes
        $axure.internal(function($ax) {
          $ax.messageCenter.addMessageListener(function(message, data) {
              if(message == 'highlightInteractive') {
                //  2.3: Show elements
                  if(data == true){
                    toggles.removeClass('exploder--hidden');
                  }
                  if(data == false){
                    toggles.addClass('exploder--hidden');
                  }
              }
          });
        });

        //3: Explode Panel
        //  3.1: String manipulate to target panel ID
        $('.exploder__toggle').click(function(){
          toggleID = $(this).attr('ID');
          panelID = toggleID.substr(0, toggleID.length-8);
          targetablePanel = $('#' + panelID);
          clonedPanelID = panelID + '--cloned';

        //  3.2: Copy panel contents into viewer window
          targetablePanel.clone().removeClass('pulsateBorder').attr('id',clonedPanelID).appendTo(modal);

        //  3.3: Sort states to be in correct order
         panelState = $('.exploder__modal .panel_state');
         panelInstance = $('.exploder__modal .ax_dynamic_panel');

         panelState.each(function(){
           simpleID = $(this).attr('ID').split('state').pop();
           $(this).attr('ID',simpleID);
         });
         panelState.sort(function(a, b) { //shamelessly ripped from http://stackoverflow.com/a/21267434
           return parseInt(a.id) - parseInt(b.id);
           }).each(function() {
             var elem = $(this);
             elem.remove();
             $(elem).appendTo(panelInstance);
           });

        //  3.4: Label States
          panelName.text(targetablePanel.attr('data-label'));
          panelState.each(function(){
            $(this).before('<h2 class="modal__stateName"></h2>');
            $(this).prev('.modal__stateName').text($(this).attr('data-label'));
          });

        //  3.5: Display viewer
          modal.removeClass('exploder--hidden');
        });


        //4: Close Modal
        closeButton.click(function() {
        //  4.1 Hide viewer
          modal.addClass('exploder--hidden');
        //  4.2 Delete children
          panelInstance.remove();
        });
      });
      </script>

    <!-- PLUGIN END-->
  </body>
</html>
